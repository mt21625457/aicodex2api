# v1.1 UAT Checklist (Scope + Template)

## 测试范围

- 批量编辑范围选择（同平台 + 同类型）
- 模板保存/应用/删除（按 scope 隔离）
- 提交语义（仅勾选字段发送）
- 异常处理（无匹配、无字段、localStorage 异常）

## 前置条件

1. 管理后台可访问账号列表页
2. 至少存在以下账号组合：
   - `openai:oauth` >= 2
   - `openai:apikey` >= 1
   - `anthropic:apikey` >= 1
3. 已登录管理员账号且有账号编辑权限

## 核心用例

### Case 1: 仅同类账号进入批量编辑
1. 在账号列表同时勾选 `openai:oauth` 和 `openai:apikey`。
2. 点击“批量编辑账号”。
3. 在范围弹窗选择 `openai + oauth`。
4. 预期：
   - 显示命中数小于总选择数
   - 提示有账号被排除
   - 进入编辑器后仅命中账号被编辑

### Case 2: 模板仅在同 scope 可见
1. 在 `openai:oauth` 编辑器中保存模板 `A`。
2. 切换到 `openai:apikey` 编辑器。
3. 预期：
   - 模板下拉不显示模板 `A`
4. 返回 `openai:oauth` 编辑器。
5. 预期：
   - 模板 `A` 可见且可应用

### Case 3: 模板应用后保持“勾选才提交”
1. 在编辑器中仅勾选 `priority` 和 `status`，保存模板 `B`。
2. 清空表单，应用模板 `B`。
3. 点击提交。
4. 预期：
   - 请求 payload 仅包含模板中已启用字段
   - 未启用字段不发送、不覆盖现有值

### Case 4: 模板覆盖更新（同名同 scope）
1. 在同一 scope 下保存模板 `C`。
2. 修改字段配置后再次用同名保存 `C`。
3. 重新应用 `C`。
4. 预期：
   - 应用到的是最新版配置
   - 模板列表中同名仅一条

### Case 5: 模板删除
1. 选中某模板点击删除并确认。
2. 预期：
   - 模板从当前 scope 列表移除
   - 刷新页面后仍不存在

## 异常与边界

### Case 6: 无字段启用
1. 打开批量编辑，不勾选任何字段直接提交。
2. 预期：
   - 显示“至少选择一个字段”
   - 不发起更新请求

### Case 7: 空模板名
1. 模板名称为空点击“保存模板”。
2. 预期：
   - 提示“请先输入模板名称”
   - 不写入模板记录

### Case 8: localStorage 不可写
1. 模拟浏览器阻止 localStorage 写入。
2. 尝试保存模板。
3. 预期：
   - 显示本地存储失败提示
   - UI 不崩溃，可继续编辑/提交

## 回滚检查

1. 关闭模板开关代码（回退至 Phase 4）后，范围选择与批量编辑基础能力不受影响。
2. `bulkUpdate` 请求结构与 v1.0 保持兼容（无新增必填字段）。
