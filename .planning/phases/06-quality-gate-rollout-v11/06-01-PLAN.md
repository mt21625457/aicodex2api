---
phase: 06-quality-gate-rollout-v11
plan: "01"
type: execute
wave: 1
depends_on:
  - 05-01
files_modified:
  - frontend/src/components/account/__tests__/bulkEditTemplateState.spec.ts
  - frontend/src/components/account/__tests__/bulkEditTemplateStore.spec.ts
  - frontend/src/components/account/__tests__/bulkEditPayload.spec.ts
  - frontend/src/components/account/__tests__/bulkEditScopeProfile.spec.ts
  - frontend/src/views/__tests__/accountsBulkEditScope.spec.ts
  - .planning/phases/06-quality-gate-rollout-v11/06-01-UAT.md
autonomous: true
requirements:
  - BULK-11
user_setup: []
must_haves:
  truths:
    - v1.1 新增核心逻辑必须有自动化测试
    - 覆盖率证据必须超过 85%
    - 需要可复用 UAT 清单覆盖成功/失败/边界场景
  artifacts:
    - .planning/phases/06-quality-gate-rollout-v11/06-01-UAT.md
---

<objective>
落实 v1.1 Phase 6：完成测试门禁与上线验收文档，确保模板复用与范围约束能力可稳定交付。
</objective>

<tasks>

<task type="auto">
  <name>Task 1: 关键路径测试矩阵固化</name>
  <files>frontend/src/components/account/__tests__/bulkEditTemplateState.spec.ts, frontend/src/components/account/__tests__/bulkEditTemplateStore.spec.ts, frontend/src/components/account/__tests__/bulkEditPayload.spec.ts, frontend/src/components/account/__tests__/bulkEditScopeProfile.spec.ts, frontend/src/views/__tests__/accountsBulkEditScope.spec.ts</files>
  <action>组合执行 scope + payload + template 相关单测，确保 v1.1 关键路径无回归。</action>
  <done>34 条测试全部通过。</done>
</task>

<task type="auto">
  <name>Task 2: 覆盖率门禁验证</name>
  <files>同上</files>
  <action>对 v1.1 核心文件执行定向 coverage 统计，验证覆盖率 >= 85%。</action>
  <done>Statements/Lines 99.55%，Branches 98.08%，Functions 100%。</done>
</task>

<task type="auto">
  <name>Task 3: UAT 清单输出</name>
  <files>.planning/phases/06-quality-gate-rollout-v11/06-01-UAT.md</files>
  <action>沉淀范围选择、模板复用、异常与回滚验证步骤。</action>
  <done>形成可执行 UAT 手册，支持上线前复核。</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [x] `cd frontend && pnpm -s vitest run src/components/account/__tests__/bulkEditTemplateState.spec.ts src/components/account/__tests__/bulkEditTemplateStore.spec.ts src/components/account/__tests__/bulkEditPayload.spec.ts src/components/account/__tests__/bulkEditScopeProfile.spec.ts src/views/__tests__/accountsBulkEditScope.spec.ts`
- [x] `cd frontend && pnpm -s vitest run --coverage src/components/account/__tests__/bulkEditTemplateState.spec.ts src/components/account/__tests__/bulkEditTemplateStore.spec.ts src/components/account/__tests__/bulkEditPayload.spec.ts src/components/account/__tests__/bulkEditScopeProfile.spec.ts src/views/__tests__/accountsBulkEditScope.spec.ts --coverage.include=src/components/account/bulkEditTemplateState.ts --coverage.include=src/components/account/bulkEditTemplateStore.ts --coverage.include=src/components/account/bulkEditPayload.ts --coverage.include=src/components/account/bulkEditScopeProfile.ts --coverage.include=src/views/admin/accountsBulkEditScope.ts --coverage.reporter=text`
- [x] `cd frontend && pnpm build`
</verification>
