---
phase: 04-scope-preview-guardrails-ux
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/views/admin/AccountsView.vue
  - frontend/src/views/admin/accountsBulkEditScope.ts
  - frontend/src/views/__tests__/accountsBulkEditScope.spec.ts
  - frontend/src/i18n/locales/zh.ts
  - frontend/src/i18n/locales/en.ts
autonomous: true
requirements:
  - BULK-09
user_setup: []
must_haves:
  truths:
    - 批量编辑前必须选择同平台同类型范围
    - 仅命中该范围的账号会进入批量编辑
    - 范围弹窗展示 platform:type 统计预览与范围提示
  artifacts:
    - frontend/src/views/admin/AccountsView.vue
    - frontend/src/views/admin/accountsBulkEditScope.ts
    - frontend/src/views/__tests__/accountsBulkEditScope.spec.ts
---

<objective>
落实 v1.1 Phase 4：在批量编辑范围弹窗中提供同类约束可视化与强约束交互，确保只对选择的同类账号执行批量编辑。
</objective>

<tasks>

<task type="auto">
  <name>Task 1: 增加范围统计数据模型与分组选项能力</name>
  <files>frontend/src/views/admin/accountsBulkEditScope.ts</files>
  <action>扩展 scope helper，支持 platform/type 计数、分组统计以及选项 meta（count/disabled）能力。</action>
  <done>可稳定生成平台/类型计数和范围统计列表。</done>
</task>

<task type="auto">
  <name>Task 2: 强化范围弹窗同类约束与预览提示</name>
  <files>frontend/src/views/admin/AccountsView.vue</files>
  <action>在弹窗中展示分组统计、将编辑数量、排除数量；类型选项对不支持范围禁用；确认时校验同类范围。</action>
  <done>必须先选平台+类型，且只会编辑命中同类范围的账号。</done>
</task>

<task type="auto">
  <name>Task 3: 补齐单测与文案</name>
  <files>frontend/src/views/__tests__/accountsBulkEditScope.spec.ts, frontend/src/i18n/locales/zh.ts, frontend/src/i18n/locales/en.ts</files>
  <action>新增统计与 option meta 分支测试，并补齐中英文范围提示文案。</action>
  <done>测试覆盖新增逻辑，文案清晰表达“同类才编辑”。</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [x] `cd frontend && pnpm -s vitest run src/views/__tests__/accountsBulkEditScope.spec.ts src/components/account/__tests__/bulkEditScopeProfile.spec.ts src/components/account/__tests__/bulkEditPayload.spec.ts`
- [x] `cd frontend && pnpm -s vitest run src/views/__tests__/accountsBulkEditScope.spec.ts src/components/account/__tests__/bulkEditScopeProfile.spec.ts src/components/account/__tests__/bulkEditPayload.spec.ts --coverage --coverage.include=src/views/admin/accountsBulkEditScope.ts --coverage.include=src/components/account/bulkEditScopeProfile.ts --coverage.include=src/components/account/bulkEditPayload.ts --coverage.reporter=text`
- [x] `cd frontend && pnpm build`
</verification>
