# v1.2 UAT Checklist（模板共享 + 版本回滚）

## 测试范围

- 模板共享可见性（private/team/groups）
- 版本历史生成与展示
- 指定版本回滚与回滚后可继续回滚
- 错误分支（无权限、版本不存在、参数非法）

## 前置条件

1. 管理后台账号列表页可正常打开
2. 至少准备两位管理员账号（A/B）
3. 至少准备 2 个分组（如：G1/G2）
4. 可创建 `openai + oauth` 的批量编辑模板

## 核心用例

### Case 1: private 模板仅创建者可见
1. A 创建 `private` 模板 T1。
2. B 在相同 scope 打开模板下拉。
3. 预期：B 看不到 T1。

### Case 2: groups 模板按交集可见
1. A 创建 `groups=[G1]` 模板 T2。
2. B 在 `scope_group_ids=[G2]` 下查看模板。
3. 预期：不可见。
4. B 在 `scope_group_ids=[G1]` 下查看模板。
5. 预期：可见。

### Case 3: 更新模板自动生成历史版本
1. A 创建模板 T3（配置 P1）。
2. A 更新 T3 为配置 P2。
3. 打开版本历史。
4. 预期：出现一条历史版本，内容对应 P1。

### Case 4: 回滚到历史版本
1. 在 T3 版本历史中选择 P1 对应版本执行回滚。
2. 预期：
   - 当前模板配置恢复为 P1
   - 版本历史新增“回滚前状态（P2）”快照

### Case 5: 回滚失败路径
1. 使用不存在的 `version_id` 调回滚接口。
2. 预期：返回 404 语义错误，前端显示失败提示。

### Case 6: 无权限访问版本历史
1. private 模板由 A 创建。
2. B 访问该模板版本历史。
3. 预期：返回无权限（不可见/禁止）。

## 上线前检查

1. 后端测试：`go test` 指定模板模块通过
2. 前端测试：模板 API 与 scope 相关测试通过
3. 覆盖率：核心改动文件 >=85%
4. 回归验证：同平台+同类型批量编辑边界未回归
